import{a as S,u as v,g as R,j as t,c as T,M as $,d as E,m as j,b as i}from"./index-CYeM0fx7.js";import{s as c}from"./index.module-DFRKY25f.js";import{L as I,a as O}from"./LockOutlined-CyzQJ-oT.js";import{D}from"./DeleteOutlined-BTO-XkgZ.js";import{U as _}from"./UserOutlined-DfL-Hzeq.js";const u=window.antd.Card,z=window.antd.Col,A=window.antd.Dropdown,N=window.antd.Layout,B=window.antd.Row,M=window.antd.Pagination,U=window.antd.Spin,F=window.antd.Empty,G=window.antd.Button,V=window.React.useEffect,s=window.React.useState;function W(){const[l,o]=s(!0),[h,x]=s([]),[a,w]=s(-1),[d,m]=s(0),[p,f]=s(1),y=S(n=>n.userInfo.userId),g=v();V(()=>{r()},[]);const r=async(n=p)=>{try{o(!0);const e=await R({pageNum:n,pageSize:12});o(!1),x((e==null?void 0:e.list)||[]),m((e==null?void 0:e.total)||0)}catch{o(!1)}},k=(n,e)=>{e&&$.confirm({title:"确认",content:"确认删除该项目吗？",okText:"确认",cancelText:"取消",onOk:async()=>{E({id:n}),j.success("删除成功"),r()}})},b=[{key:"stg",label:t.jsx("a",{href:`${i}/project/stg/${a}`,target:"_blank",children:"STG"})},{key:"pre",label:t.jsx("a",{href:`${i}/project/pre/${a}`,target:"_blank",children:"PRE"})},{key:"prod",label:t.jsx("a",{href:`${i}/project/prd/${a}`,target:"_blank",children:"PRD"})}],C=n=>{f(n),r(n)},L=async(n,e)=>{if(!e)return j.warning("该项目未授权，无法访问");g(`/project/${n}/config`)},P=n=>{w(n)};return t.jsx(t.Fragment,{children:t.jsxs(N.Content,{className:c.project,children:[t.jsx(U,{spinning:l,size:"large",children:t.jsx(B,{gutter:[20,20],children:h.map(n=>{const e=T("project",y,n);return t.jsx(z,{span:6,children:t.jsx(u,{hoverable:!0,style:{opacity:e?1:.6,background:e?"none":"url('https://static.huolala.cn/image/032950e61a5b51a653808d36398829adbd6882cc.png')"},actions:[t.jsx(A,{menu:{items:b},trigger:["click"],children:t.jsxs("div",{onClick:()=>P(n.id),children:[t.jsx(I,{}),t.jsx("span",{className:c.gabLeft,children:"访问地址"})]})},"link"),t.jsxs("div",{onClick:()=>k(n.id,e),children:[t.jsx(D,{}),t.jsx("span",{className:c.gabLeft,children:"删除项目"})]})],children:t.jsx("div",{onClick:()=>L(n.id,e),children:t.jsx(u.Meta,{style:{cursor:"pointer"},avatar:t.jsx("img",{src:n.logo,style:{width:32}}),title:n.name,description:t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{position:"absolute",top:15,right:15},children:e?null:t.jsx(O,{})}),t.jsx("p",{style:{color:"rgba(0, 0, 0, 0.88)"},children:n.remark}),t.jsxs("p",{style:{marginTop:10},children:[t.jsx(_,{style:{fontSize:14,marginRight:5}}),n.sso_name,"  ",n.updated_at]})]})})})})},n.id)})})}),d>0?t.jsx(M,{style:{textAlign:"right",marginTop:16},total:d,current:p,pageSize:12,showTotal:n=>`总共 ${n} 条`,onChange:C}):!l&&t.jsx(F,{style:{marginTop:100},children:t.jsx(G,{type:"primary",onClick:()=>g("/project/0/config"),children:"创建项目"})})]})})}export{W as default};
