import{a as P,u as v,g as S,j as t,c as R,M as T,d as $,m as g}from"./index-WS9WPIMT.js";import{s as c}from"./index.module-DFRKY25f.js";import{L as E,a as I}from"./LockOutlined-Cf2kZaK1.js";import{D as O}from"./DeleteOutlined-DII6juwf.js";import{U as D}from"./UserOutlined-moDYH0ar.js";const j=window.antd.Card,_=window.antd.Col,z=window.antd.Dropdown,A=window.antd.Layout,N=window.antd.Row,M=window.antd.Pagination,B=window.antd.Spin,F=window.antd.Empty,U=window.antd.Button,G=window.React.useEffect,s=window.React.useState;function Q(){const[i,a]=s(!0),[h,u]=s([]),[o,x]=s(-1),[d,w]=s(0),[l,m]=s(1),f=P(n=>n.userInfo.userId),p=v();G(()=>{r()},[]);const r=async(n=l)=>{try{a(!0);const e=await S({pageNum:n,pageSize:12});a(!1),u((e==null?void 0:e.list)||[]),w((e==null?void 0:e.total)||0)}catch{a(!1)}},y=(n,e)=>{e&&T.confirm({title:"确认",content:"确认删除该项目吗？",okText:"确认",cancelText:"取消",onOk:async()=>{$({id:n}),g.success("删除成功"),r()}})},k=[{key:"stg",label:t.jsx("a",{href:`http://admin.marsview.cc/project/stg/${o}`,target:"_blank",children:"STG"})},{key:"pre",label:t.jsx("a",{href:`http://admin.marsview.cc/project/pre/${o}`,target:"_blank",children:"PRE"})},{key:"prod",label:t.jsx("a",{href:`http://admin.marsview.cc/project/prd/${o}`,target:"_blank",children:"PRD"})}],b=n=>{m(n),r(n)},C=async(n,e)=>{if(!e)return g.warning("该项目未授权，无法访问");p(`/project/${n}/config`)},L=n=>{x(n)};return t.jsx(t.Fragment,{children:t.jsxs(A.Content,{className:c.project,children:[t.jsx(B,{spinning:i,size:"large",children:t.jsx(N,{gutter:[20,20],children:h.map(n=>{const e=R("project",f,n);return t.jsx(_,{span:6,children:t.jsx(j,{hoverable:!0,style:{opacity:e?1:.6,background:e?"none":"url('https://static.huolala.cn/image/032950e61a5b51a653808d36398829adbd6882cc.png')"},actions:[t.jsx(z,{menu:{items:k},trigger:["click"],children:t.jsxs("div",{onClick:()=>L(n.id),children:[t.jsx(E,{}),t.jsx("span",{className:c.gabLeft,children:"访问地址"})]})},"link"),t.jsxs("div",{onClick:()=>y(n.id,e),children:[t.jsx(O,{}),t.jsx("span",{className:c.gabLeft,children:"删除项目"})]})],children:t.jsx("div",{onClick:()=>C(n.id,e),children:t.jsx(j.Meta,{style:{cursor:"pointer"},avatar:t.jsx("img",{src:n.logo,style:{width:32}}),title:n.name,description:t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{position:"absolute",top:15,right:15},children:e?null:t.jsx(I,{})}),t.jsx("p",{style:{color:"rgba(0, 0, 0, 0.88)"},children:n.remark}),t.jsxs("p",{style:{marginTop:10},children:[t.jsx(D,{style:{fontSize:14,marginRight:5}}),n.sso_name,"  ",n.updated_at]})]})})})})},n.id)})})}),d>0?t.jsx(M,{style:{textAlign:"right",marginTop:16},total:d,current:l,pageSize:12,showTotal:n=>`总共 ${n} 条`,onChange:b}):!i&&t.jsx(F,{style:{marginTop:100},children:t.jsx(U,{type:"primary",onClick:()=>p("/project/0/config"),children:"创建项目"})})]})})}export{Q as default};
